[buildout]
develop = .
parts = ophelia apachesite test
python = vpython

[vpython]
recipe = tl.buildout_virtual_python
headers = true

[ophelia]
recipe = zc.recipe.egg
eggs = ophelia [test]
interpreter = mypython

[apache]
recipe = tl.buildout_apache:httpd

[mod-python]
recipe = tl.buildout_mod_python
httpd = apache
eggs = ${ophelia:eggs}

[ophelia-example]
modules = dir autoindex
extra-config =
    PythonOption TemplateRoot ${buildout:directory}/doc/example/ophelia_pages
    PythonOption Site http://${apachesite:servername}/
    PythonFixupHandler ophelia.apache

[apachesite]
recipe = tl.buildout_apache:root
httpd = apache
htdocs = doc/example/static
config-parts = mod-python ophelia-example

[test]
recipe = zc.recipe.testrunner
eggs = ${ophelia:eggs}
defaults = ["-v", "--ignore_dir", "parts"]
