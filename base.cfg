[buildout]
develop = .
parts = ophelia apachesite wsgirefsite test
python = vpython

[vpython]
recipe = tl.buildout_virtual_python
headers = true

[ophelia]
recipe = zc.recipe.egg
eggs = ophelia [wsgiref]
interpreter = mypython

[apache]
recipe = tl.buildout_apache:httpd

[mod-python]
recipe = tl.buildout_mod_python
httpd = apache
eggs = ophelia

[apachesite-after-mod-python]
extra-config =
    PythonOption TemplateRoot ${buildout:directory}/doc/example/ophelia_pages
    PythonOption Site http://${apachesite:servername}/
    PythonFixupHandler ophelia.modpython

[apachesite]
recipe = tl.buildout_apache:root
httpd = apache
modules = dir autoindex
htdocs = doc/example/static
config-parts = mod-python apachesite-after-mod-python

[wsgirefsite]
recipe = buildout_script
template_dir = ${buildout:directory}
template = wsgirefsite.in
name = wsgirefsite
templateroot = ${buildout:directory}/doc/example/ophelia_pages

[test]
recipe = zc.recipe.testrunner
eggs = ophelia [test]
defaults = ["-v", "-s", "ophelia"]
