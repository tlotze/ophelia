[buildout]
develop = .
parts = ophelia apachesite test sphinx

[ophelia]
recipe = zc.recipe.egg
eggs = ophelia [wsgiref]
       tl.eggdeps
interpreter = py
arguments = config_file="${buildout:directory}/.installed.cfg",
            section="ophelia"
template-root = ${buildout:directory}/example/ophelia_pages
site = http://${ophelia:host}:${ophelia:port}/

[apache]
recipe = tl.buildout_apache:httpd

[mod-python]
recipe = tl.buildout_apache:modpython
httpd = apache

[apachesite]
recipe = tl.buildout_apache:root
httpd = apache
python = mod-python
modules = authz_host dir autoindex
htdocs = example/static
eggs = ophelia
extra-config =
    PythonInterpreter main_interpreter
    PythonOption template_root ${ophelia:template-root}
    PythonOption site http://${apachesite:servername}/
    PythonFixupHandler ophelia.modpython

[test]
recipe = zc.recipe.testrunner
eggs = ophelia [test]
defaults = ["-v", "-c", "-s", "ophelia"]

[sphinx]
recipe = zc.recipe.egg
eggs = sphinx
       repoze.sphinx.autointerface
       pkginfo
       ophelia
scripts = sphinx-build
arguments = argv=sys.argv+("-E -c doc/ -d build/sphinx/doctrees"
                           " . build/sphinx/html/").split()
