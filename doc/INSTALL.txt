============
Installation
============


Buildout-based
==============

- In the distribution directory, bootstrap the buildout::

      python bootstrap/bootstrap

  where ``python`` is the Python executable you want to run the server with.
  You may also customize the buildout configuration to build and use its own
  Python.

- Run the buildout script::

      bin/buildout


Manual
======

Prerequisites
-------------

- Apache2
- Python 2.4 or better
- mod_python 3.3 or better
- the zope.pagetemplate package from Zope3 and anything it depends upon


Installation steps
------------------

- Copy the ophelia package into the system Python path or configure
  mod_python's Python path according to where you put the ophelia package.

- Install needed parts of Zope3: either build a complete Zope3 from source and
  make sure it's on mod_python's Python path, or easy_install the
  zope.pagetemplate egg into mod_python's Python installation. Zope3 packages
  can be obtained from the Python package index or from
  ``<http://download.zope.org/distribution/>``.

- Choose places in the files system to put your site's Ophelia pages and
  static (non-Ophelia) documents, resp., and configure Apache accordingly (see
  below).

- Cause Apache to reload its configuration.


Example Apache 2 configuration
------------------------------

Assume that the root of your site is published at
``<http://www.example.com/foo/bar/>``.

Assume further that your site uses the following file system locations on a
Unix system:

:/var/example/templates/: for the tree of Ophelia templates
:/var/example/python/:    for the Python packages
:/var/example/static/:    for the static stuff

To publish this site, add the following to your host's config::

    Alias /foo/bar /var/example/static
    <Location "/foo/bar">
        PythonPath "['/var/example/python'] + sys.path"
        PythonOption TemplateRoot /var/example/templates
        PythonOption Site http://www.example.com/foo/bar/
        PythonFixupHandler ophelia.apache
    </Location>
    
This instructs Apache to let Ophelia handle any URI under /foo/bar/. Ophelia
will build pages from templates where they exist, and Apache will serve files
from your static content otherwise.

It is possible to set the Ophelia handler only for directories or HTML
documents by applying some path name heuristics and matching the location
against a regular expression.

See doc/OVERVIEW.txt for other Python options Ophelia recognizes, and for
details on how Ophelia behaves.
